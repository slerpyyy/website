<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>My Silly IsEven Function | This is slerpy</title><meta name=keywords content><meta name=description content="Recently, this tweet by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter. The replies quickly turned into a competition to write the most cursed IsEven function possible. I decided to join in on the fun and after some experimentation, I came up with the following function written in C.
int is_even(int n) { while (n >> 1) n *= n; return !n; } At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result."><meta name=author content><link rel=canonical href=https://slerpy.xyz/posts/my-is-even-function/><link crossorigin=anonymous href=/assets/css/stylesheet.7cea68b77c83e5da57c9a11c56919d4de2e6847751854f818c1d6aeb21f21f85.css integrity="sha256-fOpot3yD5dpXyaEcVpGdTeLmhHdRhU+BjB1q6yHyH4U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://slerpy.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://slerpy.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://slerpy.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://slerpy.xyz/apple-touch-icon.png><link rel=mask-icon href=https://slerpy.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="My Silly IsEven Function"><meta property="og:description" content="Recently, this tweet by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter. The replies quickly turned into a competition to write the most cursed IsEven function possible. I decided to join in on the fun and after some experimentation, I came up with the following function written in C.
int is_even(int n) { while (n >> 1) n *= n; return !n; } At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result."><meta property="og:type" content="article"><meta property="og:url" content="https://slerpy.xyz/posts/my-is-even-function/"><meta property="og:image" content="https://slerpy.xyz/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-02T00:00:00+00:00"><meta property="article:modified_time" content="2020-08-02T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://slerpy.xyz/papermod-cover.png"><meta name=twitter:title content="My Silly IsEven Function"><meta name=twitter:description content="Recently, this tweet by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter. The replies quickly turned into a competition to write the most cursed IsEven function possible. I decided to join in on the fun and after some experimentation, I came up with the following function written in C.
int is_even(int n) { while (n >> 1) n *= n; return !n; } At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://slerpy.xyz/posts/"},{"@type":"ListItem","position":2,"name":"My Silly IsEven Function","item":"https://slerpy.xyz/posts/my-is-even-function/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"My Silly IsEven Function","name":"My Silly IsEven Function","description":"Recently, this tweet by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter. The replies quickly turned into a competition to write the most cursed IsEven function possible. I decided to join in on the fun and after some experimentation, I came up with the following function written in C.\nint is_even(int n) { while (n \u0026gt;\u0026gt; 1) n *= n; return !n; } At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result.","keywords":[],"articleBody":"Recently, this tweet by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter. The replies quickly turned into a competition to write the most cursed IsEven function possible. I decided to join in on the fun and after some experimentation, I came up with the following function written in C.\nint is_even(int n) { while (n \u003e\u003e 1) n *= n; return !n; } At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result.\nExplanation Let's consider what happens when we square a number of the shape $2^{k+1} a + b$ with $a\\in\\mathbb{Z}$, $k\\in\\mathbb{N}$, and $b\\in{0, 1}$. Note that every number $n\\in\\mathbb{Z}$ can be represented in this form, with $k=0$, $a=\\lfloor n/2 \\rfloor$, and $b=n \\mod 2$.\n$$ (2^{k+1} a + b)^2 = 2^{2(k+1)} a^2 + 2^{k+2} a b + b^2 = 2^{k+2}(2^{k} a^2 + a b) + b = 2^{k+2} a' + b $$\nAs we can see, we get a number of the same shape as the input, but $k$ increased by $1$. Most notably, the last bit of the number $b$ stays the same. If we repeat this operation, we can see that the first component of the number $a$ will continue to shift to the right, while $b$ remains unchanged.\nThis is also what happens to n in the while loop of our function, except the type int can only store integers with a finite number of bits. If the result of the multiplication is larger than the maximum value of int, the higher bits will \"fall off\" the left side of the integer. So after a couple of iterations, the first component is going to disappear entirely, leaving only the last bit behind.\nWhen this happens, the loop condition n \u003e\u003e 1 will be false and the loop will terminate. Finally, we negate the result of the loop and return it.\n","wordCount":"318","inLanguage":"en","datePublished":"2020-08-02T00:00:00Z","dateModified":"2020-08-02T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://slerpy.xyz/posts/my-is-even-function/"},"publisher":{"@type":"Organization","name":"This is slerpy","logo":{"@type":"ImageObject","url":"https://slerpy.xyz/favicon.ico"}}}</script><style>#molivebuds{margin:0 auto;padding:15px}#molivebuds table{background-color:var(--entry);margin:0 auto;border-radius:var(--radius)}#molivebuds table tr td{padding:15px}#molivebuds .webring-prev{text-align:right}#molivebuds .webring-info{text-align:center}#molivebuds .webring-next{text-align:left}#molivebuds .webring-links{font-size:small}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],macros:{"’":"'","\\bigsqcap":"⨅"}})})</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://slerpy.xyz/ accesskey=h title="This is slerpy (Alt + H)">This is slerpy</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://slerpy.xyz/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://slerpy.xyz/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://slerpy.xyz/contact/ title=Contact><span>Contact</span></a></li><li><a href=https://slerpy.xyz/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://slerpy.xyz/legacy/ title=Legacy><span>Legacy</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://slerpy.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://slerpy.xyz/posts/>Posts</a></div><h1 class=post-title>My Silly IsEven Function</h1><div class=post-meta><span title='2020-08-02 00:00:00 +0000 UTC'>August 2, 2020</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>Recently, <a href=https://twitter.com/ctrlshifti/status/1288745146759000064>this tweet</a>
by Kat Maddox aka @ctrlshifti has been making the rounds on Twitter.
The replies quickly turned into a competition to write the most cursed <code>IsEven</code> function possible.
I decided to join in on the fun and after some experimentation, I came up with the following function written in C.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>is_even</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (n <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>1</span>) n <span style=color:#f92672>*=</span> n;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span>n;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>At first glance, this function looks like it wouldn't even terminate for most inputs, let alone return the correct result.</p><h2 id=explanation>Explanation<a hidden class=anchor aria-hidden=true href=#explanation>#</a></h2><p>Let's consider what happens when we square a number of the shape $2^{k+1} a + b$ with $a\in\mathbb{Z}$, $k\in\mathbb{N}$, and $b\in{0, 1}$.
Note that every number $n\in\mathbb{Z}$ can be represented in this form, with $k=0$, $a=\lfloor n/2 \rfloor$, and $b=n \mod 2$.</p><p>$$
(2^{k+1} a + b)^2
= 2^{2(k+1)} a^2 + 2^{k+2} a b + b^2
= 2^{k+2}(2^{k} a^2 + a b) + b
= 2^{k+2} a' + b
$$</p><p>As we can see, we get a number of the same shape as the input, but $k$ increased by $1$.
Most notably, the last bit of the number $b$ stays the same.
If we repeat this operation, we can see that the first component of the number $a$ will continue to shift to the right, while $b$ remains unchanged.</p><p>This is also what happens to <code>n</code> in the <code>while</code> loop of our function, except the type <code>int</code> can only store integers with a finite number of bits.
If the result of the multiplication is larger than the maximum value of <code>int</code>, the higher bits will "fall off" the left side of the integer.
So after a couple of iterations, the first component is going to disappear entirely, leaving only the last bit behind.</p><p>When this happens, the loop condition <code>n >> 1</code> will be false and the loop will terminate.
Finally, we negate the result of the loop and return it.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://slerpy.xyz/posts/rise-again/><span class=title>« Prev</span><br><span>Rise Again</span></a>
<a class=next href=https://slerpy.xyz/posts/convergence/><span class=title>Next »</span><br><span>Convergence</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://slerpy.xyz/>This is slerpy</a></span>
-
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>